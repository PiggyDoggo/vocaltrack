<!--pages/record/record.wxml-->
<view class="container">
  <view class="form-item">
    <text class="date-text">日期：{{currentDate}}</text>
  </view>

  <view class="record-section">
    <view class="timer">{{recordTimeText}}</view>
    <view class="record-controls">
      <button class="record-btn {{isRecording ? 'recording' : ''}}" bindtap="handleRecordTap">
        {{isRecording ? '停止录音' : '开始录音'}}
      </button>
    </view>
    <view class="record-status" wx:if="isRecording">
      正在录音...{{recordDuration}}秒
    </view>
  </view>

  <view class="form-item">
    <view class="picker-section">
      <text class="picker-label">音乐门类：</text>
      <picker mode="multiSelector" 
        bindchange="bindMusicTypeChange" 
        bindcolumnchange="bindMusicColumnChange" 
        value="{{musicTypeIndex}}" 
        range="{{musicTypeArray}}">
        <view class="picker-content">
          {{musicTypeArray[0][musicTypeIndex[0]]}} - {{musicTypeArray[1][musicTypeIndex[1]]}}
        </view>
      </picker>
    </view>
  </view>

  <view class="records-today">
    <text class="records-count">今日已记录: {{todayRecordsCount}}/3</text>
  </view>

  <button class="submit-btn" bindtap="submitRecord" disabled="{{!recordPath || todayRecordsCount >= 3}}">保存记录</button>
</view>
