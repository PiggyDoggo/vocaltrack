<!--pages/record/record.wxml-->
<view class="container">
  <view class="form-item">
    <text class="date-text">日期：{{currentDate}}</text>
  </view>

  <view class="record-section">
    <view class="timer">{{recordTimeText}}</view>
    <view class="record-controls">
      <block wx:if="{{!isRecording}}">
        <button class="record-btn" bindtap="handleRecordTap">
          开始录音
        </button>
      </block>
      <block wx:else>
        <view class="dual-buttons">
          <button class="control-btn pause-btn" bindtap="handlePauseTap">
            {{isPaused ? '继续' : '暂停'}}
          </button>
          <button class="control-btn stop-btn" bindtap="handleStopTap">
            结束
          </button>
        </view>
      </block>
    </view>
  </view>

  <view class="form-item">
    <view class="picker-section">
      <text class="picker-label">音乐门类：</text>
      <picker mode="multiSelector" 
        bindchange="bindMusicTypeChange" 
        bindcolumnchange="bindMusicColumnChange" 
        value="{{musicTypeIndex}}" 
        range="{{musicTypeArray}}">
        <view class="picker-content">
          {{musicTypeArray[0][musicTypeIndex[0]]}} - {{musicTypeArray[1][musicTypeIndex[1]]}}
        </view>
      </picker>
    </view>
  </view>

  <view class="records-today">
    <text class="records-count">今日已记录: {{todayRecordsCount}}/3</text>
  </view>

  <button class="submit-btn" bindtap="submitRecord" disabled="{{!recordPath || todayRecordsCount >= 3}}">保存记录</button>
</view>
